<!DOCTYPE html>
<html class="x-admin-sm" xmlns:th="http://www.w3.org/1999/xhtml">

	<head>
		<meta charset="UTF-8">
		<title>欢迎页面-X-admin2.2</title>
		<meta name="renderer" content="webkit">
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
		<meta name="viewport" content="width=device-width,user-scalable=yes, minimum-scale=0.4, initial-scale=0.8,target-densitydpi=low-dpi" />
		<link rel="stylesheet" th:href="@{/static/css/font.css}">
		<link rel="stylesheet" th:href="@{/static/css/xadmin.css}">
		<script th:src="@{/static/js/layui/layui.js}" charset="utf-8"></script>
		<script type="text/javascript" th:src="@{/static/js/xadmin.js}"></script>
		<!-- <script type="text/javascript" th:src="@{/static/js/common.js}"></script> -->
		<!-- 让IE8/9支持媒体查询，从而兼容栅格 -->
		<!--[if lt IE 9]>
            <script src="https://cdn.staticfile.org/html5shiv/r29/html5.min.js"></script>
            <script src="https://cdn.staticfile.org/respond.js/1.4.2/respond.min.js"></script>
        <![endif]-->
	</head>
	<body>
        <div class="x-nav">
            <span class="layui-breadcrumb">
            	<a>[[${parentName}]]</a>
            	<a>
            		<cite>[[${menuName}]]</cite></a>
            </span>
            <a class="layui-btn layui-btn-small" style="line-height:1.6em;margin-top:3px;float:right" onclick="location.reload()" title="刷新">
                <i class="layui-icon layui-icon-refresh" style="line-height:30px">刷新</i>
            </a>
        </div>
        <div class="layui-fluid">
            <div class="layui-row layui-col-space15">
                <div class="layui-col-md12">
                    <div class="layui-card">
                        <div class="layui-card-body ">
                            <form class="layui-form layui-col-space5">
                                <div class="layui-inline layui-show-xs-block">
                                    <input class="layui-input" autocomplete="off" lay-verify="date" placeholder="开始日" name="start" id="start"></div>
                                <div class="layui-inline layui-show-xs-block">
                                    <input class="layui-input" autocomplete="off" lay-verify="date" placeholder="截止日" name="end" id="end"></div>
                                <div class="layui-inline layui-show-xs-block">
                                    <select name="searchName" id="principals" lay-search >
									
									</select>
									</div>
									<div class="layui-inline layui-show-xs-block">
									    <select name="other"   id="type" >
									    
									    </select>
									</div>
									<div class="layui-inline layui-show-xs-block">
									    <input type="text" name="other1" placeholder="请输入品种名称" autocomplete="off" class="layui-input"></div>
                                <div class="layui-inline layui-show-xs-block">
                                    <button class="layui-btn" lay-submit="" lay-filter="search">
                                        <i class="layui-icon">&#xe615;</i></button>
                                </div>
                            </form>
                        </div>
                        <div class="layui-card-body ">
                            <table class="layui-table"  lay-filter="test" id="tableTest">
								
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
	</body>
<script th:inline="javascript">
		var context = [[@{
		    /}]];
		var searchVO = {
			"start":"",
			"end":"",
			"searchName":"",
			"other":"",
			"other1":""
		};
</script>
<script type="text/javascript">
	layui.use(['table','laydate','form'],function() {
		$ = layui.jquery;
		var layer = layui.layer;
		var laydate = layui.laydate;
		var table = layui.table;
		var form = layui.form;
		
		getTypeList();
		
		form.on("submit(search)", function(data) {
			searchVO = data.field
			//getStockList()
			console.log(searchVO);
			return false
		});
		
		
		function getPrincipals(){
			$.ajax({
				url: context + 'stock/getPrincipals?name=',
				type: 'GET',
				async: false,
				success: function(data) {
					if(data.code === 200){
					    var principals = data.data.principals;
						initPrincipalId(principals)
					}else{
						layui.layer.msg(data.message);
					}
				}
			});
		}
		function getTypeList(){
			$.ajax({
				url: context + 'product/getType',
				type: 'GET',
				success: function(res) {
					if(res.code === 200){
						var typeData = res.data.typeList;
						initTableType(typeData);
						getPrincipals();
					}else
						layer.msg(res.message,{icon:2})
				}
			});
		}
		function initTableType(typeData){
			$('#type').html();
			var temp="<option value='' >请选择品种类型</option>"
			for (var i = 0; i < typeData.length; i++) {
				temp+=" <option value='" + typeData[i].id + "'>" + typeData[i].typeName + "</option>"
			}
			$('#type').append(temp);
		}
		
		function initPrincipalId(principals){
			var temp="<option value='' >请选择负责人</option>"
			for (var i = 0; i < principals.length; i++) {
				temp+=" <option value='" + principals[i].id + "'>" + principals[i].pcpName + "</option>"
			}
			$('#principals').append(temp);
			form.render('select');
		}
	})
</script>
</html>